<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: RgbColorMixerBlender.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: RgbColorMixerBlender.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { html, css, LitElement } from 'lit';
import { ref, createRef } from 'lit/directives/ref.js';

// import * as d3 from './d3';

import spectral from 'spectral.js';

import { createCustomEvent } from './helpers';

// ---

/**
 * A custom element that allows of mixing two colors with a slider.
 *
 * @class
 * @extends {LitElement}
 *
 * @property {(null|'start'|'end')} colorActive - Indicates the currently active color stop.
 * @property {string} colorStart - The starting color for the blender.
 * @property {string} colorEnd - The ending color for the blender.
 *
 * @fires update:value - Dispatched when the slider value changes, providing the mixed color.
 * @fires update:coloractive - Dispatched when the active color stop changes.
 */
export class RgbColorMixerBlender extends LitElement {
  rootEl = createRef();

  static properties = {
    _sliderValue: { state: true },
    // ---
    colorActive: { type: String },
    colorStart: { type: String },
    colorEnd: { type: String },
  };

  constructor() {
    super();

    this._sliderValue = 0;

    /** @type {null | 'start' | 'end'} */
    this.colorActive = null;
  }

  // --- private getters ---

  get #colorScale() {
    return (t) => spectral.mix(this.colorStart, this.colorEnd, t);
  }

  get #colorStops() {
    return [...Array(11).keys()].map((v) => this.#colorScale(v / 10));
  }

  // --- private methods ---

  #handleSliderValueUpdate(event) {
    this._sliderValue = event.detail.value;
  }

  #handleActiveUpdateStart(event) {
    const value = (event.detail.value) ? 'start' : null;

    this.#emitColorActiveUpdate(value);
  }

  #handleActiveUpdateEnd(event) {
    const value = (event.detail.value) ? 'end' : null;

    this.#emitColorActiveUpdate(value);
  }

  #emitValueUpdate(value) {
    const event = createCustomEvent(
      'update:value',
      { value },
      { bubbles: false },
    );

    this.dispatchEvent(event);
  }

  #emitColorActiveUpdate(value) {
    const event = createCustomEvent(
      'update:coloractive',
      { value },
      { bubbles: false },
    );

    this.dispatchEvent(event);
  }

  #colorFunc(value) {
    return this.#colorScale(value);
  }

  // --- methods ---

  /**
   * Resets the slider value to zero.
   * This method is used to clear the current value of the slider.
   */
  resetSlider() {
    this._sliderValue = 0;
  }

  // -- lifecycle ---

  willUpdate(props) {
    if (props.has('_sliderValue')) {
      this.#emitColorActiveUpdate(null);

      const color = this.#colorScale(this._sliderValue);
      this.#emitValueUpdate(color);
    }
    if (props.has('colorActive')) {
      this.#emitColorActiveUpdate(this.colorActive);
    }
  }

  // --- render

  render() {
    return html`
      &lt;div ${ref(this.rootEl)} class="body">
        &lt;rgb-color-mixer-blender-stop
          ?active="${this.colorActive === 'start'}"
          value=${this.colorStart}
          @update:active=${this.#handleActiveUpdateStart}
        >&lt;/rgb-color-mixer-blender-stop>
        &lt;rgb-color-slider
          .colorFunc=${this.#colorFunc.bind(this)}
          .colorStops=${this.#colorStops}
          max="1"
          min="0"
          step="0.01"
          value=${this._sliderValue}
          @update:value=${this.#handleSliderValueUpdate}
        >&lt;/rgb-color-slider>
        &lt;rgb-color-mixer-blender-stop
          ?active="${this.colorActive === 'end'}"
          value=${this.colorEnd}
          @update:active=${this.#handleActiveUpdateEnd}
        >&lt;/rgb-color-mixer-blender-stop>
      &lt;/div>
    `;
  }

  // --- styles ---

  static styles = css`
    :host {
      box-sizing: border-box;
      display: inline-flex;

      *,
      *::after,
      *::before {
        box-sizing: inherit;
      }
    }

    .body {
      display: flex;
      gap: 8px;
    }
  `;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="RgbColorMixer.html">RgbColorMixer</a></li><li><a href="RgbColorMixerBlender.html">RgbColorMixerBlender</a></li><li><a href="RgbColorMixerBlenderStop.html">RgbColorMixerBlenderStop</a></li><li><a href="RgbColorMixerValue.html">RgbColorMixerValue</a></li><li><a href="RgbColorSlider.html">RgbColorSlider</a></li><li><a href="RgbColorSliderItem.html">RgbColorSliderItem</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Apr 06 2025 19:50:17 GMT+0200 (Mitteleurop√§ische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
